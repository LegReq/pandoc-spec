@use "sass:map";

@use "bootstrap/scss/bootstrap";

// Breakpoint name at which table of contents appears beside the document.
$toc-breakpoint-size: sm !default;

// Breakpoint at which table of contents appears beside the document.
$toc-breakpoint: map.get(bootstrap.$grid-breakpoints, $toc-breakpoint-size) !default;

// Container is a column with multiple rows.
.container {
  @extend .col;
  @extend .d-flex;
  @extend .flex-column;
  @extend .overflow-hidden;

  // max-width is set within Bootstrap; unset it.
  max-width: unset;
}

// Header, body, and footer are rows within container.
.header, .body, .footer {
  @extend .row;
}

// Body takes up entire container less space for header and footer.
.body {
  @extend .flex-fill;
}

// Table of contents takes 25% of the space above the breakpoint and is not printable.
.toc {
  @extend .col-#{$toc-breakpoint-size}-3;
  @extend .d-print-none;
}

// Content takes up remainder of the space.
.content {
  @extend .col;
}

@media screen {
  // Container is limited to viewport width and height.
  .container {
    width: 100vw;
    height: 100vh;
  }
}

// Up to breakpoint.
@media screen and (max-width: calc($toc-breakpoint - 1px)) {
  // Enable overflow on body.
  .body {
    overflow: auto !important;
  }
}

// Above breakpoint.
@media screen and (min-width: $toc-breakpoint) {
  // Disable overflow on body.
  .body {
    overflow: hidden !important;
  }

  // Limit height and enable overflow on table of contents and content.
  .toc, .content {
    max-height: 100% !important;
    overflow: auto !important;
  }
}

// Reset example counter.
.example-counter-reset {
  counter-reset: example-counter;
}

// Increment example counter and format example title and number.
.example-number {
  counter-increment: example-counter 1;
  font-weight: bold;
}

// Alias example number after.
.content .example-number-after {
  @extend .example-number;
}

// Apply example number after example title.
.content .example-number-after::after {
  content: " " counter(example-counter);
}

// Alias example number before.
.content .example-number-before {
  @extend .example-number;
}

// Apply example number before example title.
.content .example-number-before::before {
  content: counter(example-counter) ". ";
}

// Format example caption.
.example-caption {
  font-style: italic;
}

// Reset figure counter.
.figure-counter-reset {
  counter-reset: figure-counter;
}

// Increment figure counter and format figure title and number.
.figure-number {
  counter-increment: figure-counter 1;
  font-weight: bold;
}

// Alias figure number after.
.content .figure-number-after {
  @extend .figure-number;
}

// Apply figure number after figure title.
.content .figure-number-after::after {
  content: " " counter(figure-counter);
}

// Alias figure number before.
.content .figure-number-before {
  @extend .figure-number;
}

// Apply figure number before figure title.
.content .figure-number-before::before {
  content: counter(figure-counter) ". ";
}

// Format figure caption.
.figure-caption {
  font-style: italic;
}

// Reset table counter.
.table-counter-reset {
  counter-reset: table-counter;
}

// Increment table counter and format table title and number.
.table-number {
  counter-increment: table-counter 1;
  font-weight: bold;
}

// Alias table number after.
.content .table-number-after {
  @extend .table-number;
}

// Apply table number after table title.
.content .table-number-after::after {
  content: " " counter(table-counter);
}

// Alias table number before.
.content .table-number-before {
  @extend .table-number;
}

// Apply table number before table title.
.content .table-number-before::before {
  content: counter(table-counter) ". ";
}

// Format table caption.
.table-caption {
  font-style: italic;
}

// Counters are initialized when content is generated.
.content {
  counter-reset: example-counter figure-counter table-counter;
}
